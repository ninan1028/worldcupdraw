Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},Number.prototype.toFixed=function(t){var e;e=this>0?(parseInt(this*Math.pow(10,t)+.5)/Math.pow(10,t)).toString():(parseInt(this*Math.pow(10,t)-.5)/Math.pow(10,t)).toString();var n=e.indexOf(".");if(n<0&&t>0){e+=".";for(var i=0;i<t;i++)e+="0"}else{n=e.length-n;for(var i=0;i<t-n+1;i++)e+="0"}return e},Number.prototype.add=function(t){var e,n,i;try{e=this.toString().split(".")[1].length}catch(t){e=0}try{n=t.toString().split(".")[1].length}catch(t){n=0}return i=Math.pow(10,Math.max(e,n)),(this*i+t*i)/i},Number.prototype.sub=function(t){return this.add(-t)},Number.prototype.mul=function(t){var e=0,n=this.toString(),i=t.toString();try{e+=n.split(".")[1].length}catch(t){}try{e+=i.split(".")[1].length}catch(t){}return Number(n.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,e)},Number.prototype.div=function(t){var e,n,i=0,o=0;try{i=this.toString().split(".")[1].length}catch(t){}try{o=t.toString().split(".")[1].length}catch(t){}return e=Number(this.toString().replace(".","")),n=Number(t.toString().replace(".","")),e/n*Math.pow(10,o-i)};var GB={};GB.isLogin=!0,GB.utils={temp:function(t,e){return t.replace(/\$\w+\$/gi,function(t){var n=e[t.replace(/\$/g,"")];return n+""=="undefined"?"":n})},slideShowLoading:function(){$(".ajax_loading").show(),setTimeout(function(){$(".ajax_loading").hide()},1e3)},slideNoDataHtml:function(t){if($(".ajax_loading img").remove(),0==t.find(".no-data").length){t.append("<span class='no-data'> 没有更多数据了</span>")}},slideNoData:function(t){$(".ajax_loading img").remove(),$(".ajax_loading .data_des").html("已全部加载完毕"),$(".ajax_loading").show(),setTimeout(function(){$(".ajax_loading").hide()},1500)},slideBottom:function(t,e){$(t)[0]&&$(window).on("scroll",function(){var t=window.innerHeight,n=$(document).height();$(window).scrollTop()>=n-t-5&&e&&e()})},getUrl:function(t){for(var e=document.location.href,n=e.substring(e.indexOf("?")+1).split("&"),i=0;i<n.length;i++){if(-1!=n[i].indexOf(t+"="))return n[i].replace(t+"=","").replace("?","")}return""},GetRequest:function(){var t=location.search,e={};if(-1!=t.indexOf("?")){var n=t.substr(1);strs=n.split("&");for(var i=0;i<strs.length;i++)e[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1])}return e},clearNoNum:function(t,e){t.value=t.value.replace(/[^\d.]/g,""),t.value=t.value.replace(/^\./g,""),t.value=t.value.replace(/\.{2,}/g,"."),t.value=t.value.replace(".","$#$").replace(/\./g,"").replace("$#$","."),t.value=t.value.replace(new RegExp("^(\\-)*(\\d+)\\.(\\d{0,"+e+"}).*$","gmi"),"$1$2.$3")},getWeixinlink:function(){var t="https:"==document.location.protocol?"https:":"http:";!function(){var e=document.createElement("script");e.src=t+"//res.wx.qq.com/open/js/jweixin-1.0.0.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}()},getPlatform:function(){var t=navigator.userAgent.toLowerCase();return t.match(/(iphone|ipad|ipod|android|MicroMessenger)/)?t.match(/(iphone|ipad|ipod|android|MicroMessenger)/)[1]:""},initJsBridge:function(t){window.android_new?t(android_new):document.addEventListener("WebViewJavascriptBridgeReady",function(){t(android_new)},!1)},htoast:function(t,e,n,i){var n=n||1500,i=i||"body",e=e||"default",o=document.createElement("div");o.className="common-toast common-toast-show","default"!=e&&"number"==typeof e?(o.style.bottom=e+"rem",o.style.top="initial"):o.className="top"==e?"common-toast common-toast-top common-transform-top":"common-toast common-toast-middle common-toast-show",o.innerHTML=t;var s=document.querySelector(i);if(!s)return void console.log("元素没有获取到");s.appendChild(o),o.style.display="block";var a=setTimeout(function(){o.className+=" common-toast-hide",clearTimeout(a);var t=setTimeout(function(){document.body.removeChild(o),clearTimeout(t)},200)},n)},htoasttop:function(t,e){var e=e||1500,n=n||"body",i=document.createElement("div");i.className="common-toast-top",i.innerHTML=t;var o=document.querySelector(n);if(!o)return void console.log("元素没有获取到");o.appendChild(i),setTimeout(function(){i.className+=" common-transform-top"},10);var s=setTimeout(function(){i.className+=" common-toast-hide",clearTimeout(s);var t=setTimeout(function(){document.body.removeChild(i),clearTimeout(t)},200)},e)},ModalHelper:function(t){var e;return{afterOpen:function(){e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,document.body.classList.add("modal-open-no-scroll"),document.body.style.top=-e+"px"},beforeClose:function(){document.body.classList.remove("modal-open-no-scroll"),document.body.style.top=0,$("body").scrollTop(e)}}}(),countDown:function(t,e,n,i,o){function s(){var t=(m.getHours(),m.getMinutes(),m.getSeconds(),u.getTime()-m.getTime());if(t>0){var e=t;l=Math.floor(e/h),e-=l*h,c=Math.floor(e/g),e-=c*g,d=Math.floor(e/p),e-=d*p;var o=Math.floor(e/f);a.day=l||"",a.hour=c||"",a.min=d||"",a.sec=o||"0",n&&n.call(r,a)}else a="",i&&i.call(r);m.setTime(m.getTime()+1e3),a&&setTimeout(s,1e3)}var a={day:0,hour:0,min:0,sec:0},r=o||this,l=-1,c=-1,d=-1,u=new Date(e),h=864e5,g=36e5,p=6e4,f=1e3,m=new Date(t);s()}},GB.valid={checkTelephone:function(t){return t?!(!/1[3457869]\d{9}/.test(t)||11!=t.length)||(GB.utils.htoast("手机号格式不正确"),!1):(GB.utils.htoast("请输入手机号"),!1)},checkPassword:function(t){return t?!(t.length>10)||(GB.utils.htoast("密码位数应小于10"),!1):(GB.utils.htoast("请输入密码"),!1)},checkYzm:function(t){return t?!(t.length>4)||(GB.utils.htoast("验证码格式不正确"),!1):(GB.utils.htoast("请输入验证码"),!1)}},GB.Ajax={ajax:function(t){var t=t||{},e={type:"post",data:{},url:""};return e=$.extend({},e,t),$.ajax(e).then(function(t){return"0000"===t.code?t:("0003"===t.code?(GB.post(basePath+"/user/setstore",{telephone:"",sessionId:""}).done(function(){console.log("清除session")}),GB.utils.callCustomMethod("kickout",{msg:t.msg})):"0002"===t.code||t.msg&&GB.utils.singleAlert(t,function(){GB.utils.alert(t.msg)}),$.Deferred().reject(t))},function(t){console.log(t)})},ajax2:function(t){var t=t||{},e={type:"post",data:{},url:""};return e=$.extend({},e,t),$.ajax(e).then(function(t){return t},function(t){console.log(t)})},post:function(t,e){return GB.Ajax.ajax({url:t,data:e,type:"post"})},get:function(t,e){return GB.Ajax.ajax({url:t,data:e,type:"get"})},post2:function(t,e){return GB.Ajax.ajax2({url:t,data:e,type:"post"})},get2:function(t,e){return GB.Ajax.ajax2({url:t,data:e,type:"get"})}},GB.post=function(t,e){return GB.Ajax.post(t,e)},GB.get=function(t,e){return GB.Ajax.get(t,e)},GB.ajax=function(t){return GB.Ajax.ajax(t)},GB.ajax2=function(t){return GB.Ajax.ajax2(t)},GB.post2=function(t,e){return GB.Ajax.post2(t,e)},GB.get2=function(t,e){return GB.Ajax.get2(t,e)},GB.Widget=function(){this.boudingBox=null},GB.Widget.prototype={on:function(t,e){return void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this},fire:function(t,e){if(this.handlers[t]instanceof Array)for(var n=this.handlers[t],i=0,o=n.length;i<o;i++)n[i](e)},render:function(t){this.renderUI(),this.handlers={},this.syncUI(t),this.bindUI()},destroyInternal:function(){this.boudingBox.off(),this.boudingBox.remove()},destroy:function(){this.destructor(),GB.utils.ModalHelper.beforeClose(),this.boudingBox.off(),this.boudingBox.remove()},renderUI:function(){},bindUI:function(){},syncUI:function(t){},destructor:function(){}},GB.utils.pop=function(t){this.cfg={width:558,height:245,title:"",content:"",type:0,maskType:0,flag:"",loadingwidth:50,loadingheight:50,displeartime:3e3,handler4Displear:"",hasCloseBtn:!0,hasMask:!0,hasScroll:!0,skinClassName:null,handler4CloseBtn:null,handler4CancleBtn:null,handler4SureBtn:null,eventHandler:null}},GB.utils.pop.prototype=$.extend({},new GB.Widget,{renderUI:function(){var t="";switch(this.cfg.winType){case"landingalert":var e=this.cfg.title||"提示",n=this.cfg.content||"",i=' <div class="landingalert-wrap"><div class="landingalert-title">'+e+'</div><div class="landingalert-tip-text">'+n+'</div><button type="button" class="oppcloseBtn landingalert-close-btn">关闭</button></div>';this.cfg.content=i;break;case"downloadalert":var o='<div class="downalert-wrap"><p>您已经注册过了！</p><p>请立即下载</p><div class="downalertbutton download" id="J_downalert_down">立即下载黄金钱包APP</div><div class="downalert-close  oppcloseBtn" ></div></div>';this.cfg.content=o;break;case"landingalert2":var s=this.cfg.content||"",a=this.cfg.buttontext||"",o='<div class="downalert-wrap">'+s+'<div class="downalertbutton download" id="J_downalert_down">'+a+'</div><div class="downalert-close  oppcloseBtn" ></div></div>';this.cfg.content=o;break;case"alert":var e=this.cfg.title;t='<div class="alert-title"><span class="dialogTitle">'+e+'</span><a class="dialogClose oppcloseBtn " title="关闭"></a></div>';var n=this.cfg.content||"";this.cfg.content='<div class="alert-Con"><div class="windowText">'+n+"</div></div>";break;case"showhtml":t="";break;case"loading":t="<div class='dialog_loading'><img style='width:"+this.cfg.loadingwidth/75+"rem;height:"+this.cfg.loadingheight/75+"rem;' src='"+basePath+"/statics/images/common/loadding.gif' /></div>";break;case"loadingWithOutMask":case"beforeLoading":t="<div class='dialog_loading'><img style='width:"+this.cfg.loadingwidth/75+"rem;height:"+this.cfg.loadingheight/75+"rem;' src='"+basePath+"/statics/images/common/loadding.gif' /></div>";break;case"questiontip":var t='<div class="pop-risk-waring">    <div>        <span class="source-title">'+this.cfg.title+'</span>        <img src="'+basePath+'/statics/images/common/close.png" class="close oppcloseBtn">    </div>    <div class="content">    '+this.cfg.content+"     </div></div>";this.cfg.content=t;break;default:t=""}if("modal"==this.cfg.type?this.boudingBox=$('<div  id="'+this.cfg.flag+'" class="show_modal"><div class="window_top">'+t+'</div><div class="show_modal_body">'+this.cfg.content+"</div></div>"):this.boudingBox=$('<div  id="'+this.cfg.flag+'" class="show_window"><div class="window_top">'+t+'</div><div class="window_body">'+this.cfg.content+"</div></div>"),this.cfg.hasMask){$(document).height();"loadingWithOutMask"===this.cfg.winType?this._mask=$('<div class="windowMask2"></div>'):"beforeLoading"===this.cfg.winType?this._mask=$('<div class="windowMask3"></div>'):this._mask=$('<div class="windowMask"></div>'),this._mask.appendTo("body");var r=this;this._mask.on("click",function(){r.fire("close"),r.destroy()}),0==this.cfg.maskType&&"loading"!==this.cfg.winType&&"loadingWithOutMask"!==this.cfg.winType&&"beforeLoading"!==this.cfg.winType||(this._mask.css("z-index",1e3),this._mask.off("click"))}},bindUI:function(){var t=this;this.boudingBox.on("click",".oppcloseBtn",function(){t.fire("close"),t.destroy()}),"questiontip"===t.cfg.winType&&this.boudingBox.on("click",function(){t.destroy()}),this.boudingBox.find(".J_cancelBtn")[0]&&this.boudingBox.delegate(".J_cancelBtn","click",function(){t.fire("cancel"),t.destroy()}),this.boudingBox.find(".J_sureBtn")[0]&&this.boudingBox.delegate(".J_sureBtn","click",function(){t.fire("sure"),t.destroy()}),"downloadalert"!=this.cfg.winType&&"landingalert2"!=this.cfg.winType||$("#J_downalert_down").on("click",function(){openApp&&openApp()}),this.cfg.handler4CloseBtn&&this.on("close",this.cfg.handler4CloseBtn),this.cfg.handler4Displear&&this.on("displear",this.cfg.handler4Displear),this.cfg.handler4CancleBtn&&this.on("cancel",this.cfg.handler4CancleBtn),this.cfg.handler4SureBtn&&this.on("sure",this.cfg.handler4SureBtn),this.cfg.eventHandler&&this.cfg.eventHandler.call(this)},syncUI:function(t){$(t||document.body).append(this.boudingBox),GB.utils.ModalHelper.afterOpen(),this.cfg.skinClassName&&this.boudingBox.addClass(this.cfg.skinClassName)},destructor:function(){this._mask&&this._mask.remove()},loading:function(t,e){return $.extend(this.cfg,t,{winType:"loading"}),this.render(e),this},loadingWithOutMask:function(t,e){return $.extend(this.cfg,t,{winType:"loadingWithOutMask"}),this.render(e),this},beforeLoading:function(t,e){return $.extend(this.cfg,t,{winType:"beforeLoading"}),this.render(e),this},landingalert:function(t,e){return $.extend(this.cfg,t,{winType:"landingalert"}),this.render(e),this},landingalert2:function(t,e){return $.extend(this.cfg,t,{winType:"landingalert2"}),this.render(e),this},downloadalert:function(t,e){return $.extend(this.cfg,t,{winType:"downloadalert"}),this.render(e),this},showhtml:function(t,e){return $.extend(this.cfg,t,{winType:"showhtml"}),this.render(e),this},questiontip:function(t,e){return $.extend(this.cfg,t,{winType:"questiontip"}),this.render(e),this}}),GB.utils.loading=function(t,e){var n=$.extend({},t);return(new GB.utils.pop).loading(n,e)},GB.utils.loadingWithOutMask=function(t,e){var n=$.extend({},t);return(new GB.utils.pop).loadingWithOutMask(n,e)},GB.utils.beforeLoading=function(t,e){var n=$.extend({},t);return(new GB.utils.pop).beforeLoading(n,e)},GB.utils.landingalert=function(t,e,n){if(t){var i=$.extend({},{content:t},e);return(new GB.utils.pop).landingalert(i,n)}},GB.utils.landingalert2=function(t,e,n){if(t){var i=$.extend({},{content:t},e);return(new GB.utils.pop).landingalert2(i,n)}},GB.utils.downloadalert=function(t,e,n){var i=$.extend({},{content:t},e);return(new GB.utils.pop).downloadalert(i,n)},GB.utils.showhtml=function(t,e){var n=$.extend({},t);return(new GB.utils.pop).showhtml(n,e)},GB.utils.questiontip=function(t,e,n,i){var o=$.extend({title:t,content:e},n);return(new GB.utils.pop).questiontip(o,i)},GB.cookie={getCookie:function(t){for(var e=t+"=",n=e.length,i=document.cookie.length,o=0;o<i;){var s=o+n;if(document.cookie.substring(o,s)==e){var a=document.cookie.indexOf(";",s);-1==a&&(a=document.cookie.length);var r=unescape(document.cookie.substring(s,a));if(""!=r)return r}if(0==(o=document.cookie.indexOf(" ",o)+1))break}return""},delCookie:function(t){var e=new Date;e.setTime(e.getTime()-100),document.cookie=t+"=; path=/; expires="+e.toGMTString(),document.cookie=t+"=; path=/; expires="+e.toGMTString()},addCookie:function(t,e){var n=new Date,i=arguments,o=arguments.length,s=o>2&&0!=i[2]?i[2]:null,a=o>3?i[3]:null,r=o>4?i[4]:null,l=o>5&&i[5];null!=s&&n.setTime(n.getTime()+1e3*s),document.cookie=t+"="+escape(e)+(null==s?"":"; expires="+n.toGMTString())+(null==a?";path=/":"; path="+a)+(null==r?"":"; domain="+r)+(1==l?"; secure":"")}};