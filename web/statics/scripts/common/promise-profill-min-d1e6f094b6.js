!function(t){function n(){for(var t=0;t<g.length;t++)g[t][0](g[t][1]);g=[],y=!1}function e(t,e){g.push([t,e]),y||(y=!0,j(n,0))}function o(t,n){function e(t){c(n,t)}function o(t){u(n,t)}try{t(e,o)}catch(t){o(t)}}function r(t){var n=t.owner,e=n.state_,n=n.data_,o=t[e];if(t=t.then,"function"==typeof o){e=_;try{n=o(n)}catch(n){u(t,n)}}i(t,n)||(e===_&&c(t,n),e===v&&u(t,n))}function i(t,n){var e;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var o=n.then;if("function"==typeof o)return o.call(n,function(o){e||(e=!0,n!==o?c(t,o):f(t,o))},function(n){e||(e=!0,u(t,n))}),!0}}catch(n){return e||u(t,n),!0}return!1}function c(t,n){t!==n&&i(t,n)||f(t,n)}function f(t,n){t.state_===w&&(t.state_=m,t.data_=n,e(s,t))}function u(t,n){t.state_===w&&(t.state_=m,t.data_=n,e(h,t))}function a(t){var n=t.then_;for(t.then_=void 0,t=0;t<n.length;t++)r(n[t])}function s(t){t.state_=_,a(t)}function h(t){t.state_=v,a(t)}function l(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(!1==this instanceof l)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],o(t,this)}var p=t.Promise,d=p&&"resolve"in p&&"reject"in p&&"all"in p&&"race"in p&&function(){var t;return new p(function(n){t=n}),"function"==typeof t}();"undefined"!=typeof exports&&exports?(exports.Promise=d?p:l,exports.Polyfill=l):"function"==typeof define&&define.amd?define(function(){return d?p:l}):d||(t.Promise=l);var y,w="pending",m="sealed",_="fulfilled",v="rejected",b=function(){},j="undefined"!=typeof setImmediate?setImmediate:setTimeout,g=[];l.prototype={constructor:l,state_:w,then_:null,data_:void 0,then:function(t,n){var o={owner:this,then:new this.constructor(b),fulfilled:t,rejected:n};return this.state_===_||this.state_===v?e(r,o):this.then_.push(o),o.then},catch:function(t){return this.then(null,t)}},l.all=function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("You must pass an array to Promise.all().");return new this(function(n,e){for(var o,r=[],i=0,c=0;c<t.length;c++)(o=t[c])&&"function"==typeof o.then?o.then(function(t){return i++,function(e){r[t]=e,--i||n(r)}}(c),e):r[c]=o;i||n(r)})},l.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("You must pass an array to Promise.race().");return new this(function(n,e){for(var o,r=0;r<t.length;r++)(o=t[r])&&"function"==typeof o.then?o.then(n,e):n(o)})},l.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(n){n(t)})},l.reject=function(t){return new this(function(n,e){e(t)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);