!function(){"use strict";function t(t,e,n){var e=e||{},t=t||"",n=n||"post";if(!t&&"string"!=typeof t)return void console.log("传入的url有问题");"/"!=t.charAt(0)&&(t="/"+t);var o={type:n,url:proxypath+t,data:e};return new i(function(t,e){GB.ajax2(o).done(function(e){t(e)}).fail(function(t){e(t)})})}var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,o){!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(){for(var t=0;t<_.length;t++)_[t][0](_[t][1]);_=[],T=!1}function a(t,e){_.push([t,e]),T||(T=!0,B(r,0))}function i(t,e){function n(t){s(e,t)}function o(t){f(e,t)}try{t(n,o)}catch(t){o(t)}}function u(t){var e=t.owner,n=e.state_,o=e.data_,r=t[n],a=t.then;if("function"==typeof r){n=A;try{o=r(o)}catch(t){f(a,t)}}c(a,o)||(n===A&&s(a,o),n===b&&f(a,o))}function c(t,e){var o;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":n(e)))){var r=e.then;if("function"==typeof r)return r.call(e,function(n){o||(o=!0,e!==n?s(t,n):m(t,n))},function(e){o||(o=!0,f(t,e))}),!0}}catch(e){return o||f(t,e),!0}return!1}function s(t,e){t!==e&&c(t,e)||m(t,e)}function m(t,e){t.state_===g&&(t.state_=w,t.data_=e,a(d,t))}function f(t,e){t.state_===g&&(t.state_=w,t.data_=e,a(h,t))}function l(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)u(e[n])}function d(t){t.state_=A,l(t)}function h(t){t.state_=b,l(t)}function p(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof p==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],i(t,this)}var y=t.Promise,v=y&&"resolve"in y&&"reject"in y&&"all"in y&&"race"in y&&function(){var t;return new y(function(e){t=e}),"function"==typeof t}();o?(o.Promise=v?y:p,o.Polyfill=p):v||(t.Promise=p);var T,g="pending",w="sealed",A="fulfilled",b="rejected",C=function(){},B="undefined"!=typeof setImmediate?setImmediate:setTimeout,_=[];p.prototype={constructor:p,state_:g,then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(C),fulfilled:t,rejected:e};return this.state_===A||this.state_===b?a(u,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},p.all=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.all().");return new n(function(e,n){for(var o,r=[],a=0,i=0;i<t.length;i++)o=t[i],o&&"function"==typeof o.then?o.then(function(t){return a++,function(n){r[t]=n,--a||e(r)}}(i),n):r[i]=o;a||e(r)})},p.race=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.race().");return new n(function(e,n){for(var o,r=0;r<t.length;r++)o=t[r],o&&"function"==typeof o.then?o.then(e,n):e(o)})},p.resolve=function(t){var e=this;return t&&"object"===(void 0===t?"undefined":n(t))&&t.constructor===e?t:new e(function(e){e(t)})},p.reject=function(t){return new this(function(e,n){n(t)})}}("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:e)}),i=a.Promise,u=function(e,n){return t(e,n,"post")},c=function(e,n){return t(e,n,"get")},s=function(){function t(e){if(o(this,t),!e||"string"!=typeof e)throw new Error("prefix is undefine");"/"!=e.charAt(e.length-1)&&(e+="/"),this.prefix=e,this.queryFilter=function(t){return t},this.exceptFilter=function(t){return i.reject(t)}}return r(t,[{key:"get",value:function(t,e){return c(this.prefix+t,e).then(this.queryFilter).catch(this.exceptFilter)}},{key:"post",value:function(t,e){return u(this.prefix+t,e).then(this.queryFilter).catch(this.exceptFilter)}}]),t}(),m=new s("/activity"),f=function(t){return m.post("vote/votePromotion",t)},l=function(t){return m.post("match/getMatch",t)},d=[{id:97,matchCode:"a",roundCode:"2",matchTime:"2018-06-22 15:00:00.0",matchAdress:"aaa",teamA:33,teamB:37,teamAName:"德国",teamBName:"英格兰",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3},{id:98,matchCode:"b",roundCode:"2",matchTime:"2018-06-23 15:00:00.0",matchAdress:"bbb",teamA:34,teamB:45,teamAName:"哥斯达黎加",teamBName:"墨西哥",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3},{id:99,matchCode:"c",roundCode:"2",matchTime:"2018-06-23 18:00:00.0",matchAdress:"ccc",teamA:41,teamB:40,teamAName:"阿根廷",teamBName:"瑞 典",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3},{id:100,matchCode:"d",roundCode:"2",matchTime:"2018-06-24 15:00:00.0",matchAdress:"ddd",teamA:37,teamB:51,teamAName:"英格兰",teamBName:"美 国",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3},{id:101,matchCode:"e",roundCode:"2",matchTime:"2018-06-25 12:00:00.0",matchAdress:"eee",teamA:53,teamB:58,teamAName:"巴西",teamBName:"瑞 士",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3},{id:102,matchCode:"f",roundCode:"2",matchTime:"2018-06-26 15:00:00.0",matchAdress:"fff",teamA:49,teamB:61,teamAName:"意大利",teamBName:"西班牙",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3},{id:103,matchCode:"g",roundCode:"2",matchTime:"2018-06-27 08:00:00.0",matchAdress:"ggg",teamA:57,teamB:48,teamAName:"法 国",teamBName:"葡萄牙",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3},{id:104,matchCode:"h",roundCode:"2",matchTime:"2018-06-27 15:00:00.0",matchAdress:"hhh",teamA:62,teamB:38,teamAName:"乌克兰",teamBName:"巴拉圭",selectedTeam:null,score:null,userId:null,createTime:1524985333e3,modifyTime:1524985333e3}];new Vue({el:"#app",data:{list:[],teamstatus:[{},{},{},{},{},{},{},{}],selectdata:[]},mounted:function(){var t=this;l({roundCode:2}).then(function(e){if(0==e.status){var n=e.data||[];t.list=t.formatList(n)}else e.msg&&GB.utils.htoast(msg)}),this.formatList()},methods:{formatList:function(t){var t=t||d;t.forEach(function(t){var e=new Date(t.matchTime.replace(/-/g,"/")),n=e.getMonth()+1+"月"+e.getDate()+"日",o=e.getMinutes()?e.getMinutes():"00",r=e.getHours()+":"+o;t.data=n,t.hour=r}),this.list=t},tap:function(t,e){var n=this.list[t].matchCode;this.teamstatus[t].teamId==e?this.$set(this.teamstatus,t,{teamId:""}):this.$set(this.teamstatus,t,{teamId:e});var o=!0;if(this.selectdata.forEach(function(t){if(t.groupCode==n)return t.teamId==e?t.teamId="":t.teamId=e,void(o=!1)}),o){var r={roundsCode:"2",groupCode:n,teamId:e};this.selectdata.push(r)}this.selectdata=this.selectdata.filter(function(t){return!!t.teamId})},submit:function(){if(this.selectdata.length<6)return void GB.utils.htoast("请至少选择6支出现球队");var t=this.selectdata.map(function(t){return t}),e={roundsCode:2,jsonStr:JSON.stringify(t)};f(e).then(function(t){0==t.status?location.href=htmlbasePath+"/pages/cupdraw/success.html":t.msg&&GB.utils.htoast(msg)})}}})}();