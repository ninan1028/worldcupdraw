!function(){"use strict";function t(t,n,e){var n=n||{},t=t||"",e=e||"post";if(!t&&"string"!=typeof t)return void console.log("传入的url有问题");"/"!=t.charAt(0)&&(t="/"+t);var o={type:e,url:proxypath+t,data:n};return new s(function(t,n){GB.ajax2(o).done(function(n){t(n)}).fail(function(t){n(t)})})}var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),i=function(t,n){return n={exports:{}},t(n,n.exports),n.exports}(function(t,o){!function(t){function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(){for(var t=0;t<z.length;t++)z[t][0](z[t][1]);z=[],v=!1}function i(t,n){z.push([t,n]),v||(v=!0,P(r,0))}function s(t,n){function e(t){c(n,t)}function o(t){h(n,t)}try{t(e,o)}catch(t){o(t)}}function u(t){var n=t.owner,e=n.state_,o=n.data_,r=t[e],i=t.then;if("function"==typeof r){e=_;try{o=r(o)}catch(t){h(i,t)}}a(i,o)||(e===_&&c(i,o),e===x&&h(i,o))}function a(t,n){var o;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===(void 0===n?"undefined":e(n)))){var r=n.then;if("function"==typeof r)return r.call(n,function(e){o||(o=!0,n!==e?c(t,e):f(t,e))},function(n){o||(o=!0,h(t,n))}),!0}}catch(n){return o||h(t,n),!0}return!1}function c(t,n){t!==n&&a(t,n)||f(t,n)}function f(t,n){t.state_===g&&(t.state_=b,t.data_=n,i(p,t))}function h(t,n){t.state_===g&&(t.state_=b,t.data_=n,i(d,t))}function l(t){var n=t.then_;t.then_=void 0;for(var e=0;e<n.length;e++)u(n[e])}function p(t){t.state_=_,l(t)}function d(t){t.state_=x,l(t)}function y(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof y==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],s(t,this)}var m=t.Promise,w=m&&"resolve"in m&&"reject"in m&&"all"in m&&"race"in m&&function(){var t;return new m(function(n){t=n}),"function"==typeof t}();o?(o.Promise=w?m:y,o.Polyfill=y):w||(t.Promise=y);var v,g="pending",b="sealed",_="fulfilled",x="rejected",k=function(){},P="undefined"!=typeof setImmediate?setImmediate:setTimeout,z=[];y.prototype={constructor:y,state_:g,then_:null,data_:void 0,then:function(t,n){var e={owner:this,then:new this.constructor(k),fulfilled:t,rejected:n};return this.state_===_||this.state_===x?i(u,e):this.then_.push(e),e.then},catch:function(t){return this.then(null,t)}},y.all=function(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to Promise.all().");return new e(function(n,e){for(var o,r=[],i=0,s=0;s<t.length;s++)o=t[s],o&&"function"==typeof o.then?o.then(function(t){return i++,function(e){r[t]=e,--i||n(r)}}(s),e):r[s]=o;i||n(r)})},y.race=function(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to Promise.race().");return new e(function(n,e){for(var o,r=0;r<t.length;r++)o=t[r],o&&"function"==typeof o.then?o.then(n,e):n(o)})},y.resolve=function(t){var n=this;return t&&"object"===(void 0===t?"undefined":e(t))&&t.constructor===n?t:new n(function(n){n(t)})},y.reject=function(t){return new this(function(n,e){e(t)})}}("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:n)}),s=i.Promise,u=function(n,e){return t(n,e,"post")},a=function(n,e){return t(n,e,"get")},c=function(){function t(n){if(o(this,t),!n||"string"!=typeof n)throw new Error("prefix is undefine");"/"!=n.charAt(n.length-1)&&(n+="/"),this.prefix=n,this.queryFilter=function(t){return t},this.exceptFilter=function(t){return s.reject(t)}}return r(t,[{key:"get",value:function(t,n){return a(this.prefix+t,n).then(this.queryFilter).catch(this.exceptFilter)}},{key:"post",value:function(t,n){return u(this.prefix+t,n).then(this.queryFilter).catch(this.exceptFilter)}}]),t}(),f=new c("/activity"),h=function(t){return f.post("/user/register",t)},l=function(t){return f.post("/user/login",t)};new Vue({el:"#app",data:{status:1,telephone:"",password:"",yzm:"",rtelephone:"",rpassword:"",ragainpassword:"",ryzm:"",logincount:0,yzmimg:""},mounted:function(){this.yzmimg=proxypath+"/activity/getVerificationCode"},methods:{changestatus:function(t){this.status=t,this.changeYzm()},changeYzm:function(){this.yzmimg=proxypath+"/activity/getVerificationCode?random="+Math.random()},login:function(){var t=this;if(!GB.valid.checkTelephone(this.telephone))return!1;if(!GB.valid.checkPassword(this.password))return!1;if(this.logincount>2&&!GB.valid.checkYzm(this.yzm))return!1;var n={phone:this.telephone,password:this.password,verificationCode:this.yzm};l(n).then(function(e){0==e.status?(GB.cookie.addCookie("telephone",n.phone),location.href=htmlbasePath+"/index.html"):(t.logincount++,e.msg&&GB.utils.htoast(e.msg))})},register:function(){if(!GB.valid.checkTelephone(this.rtelephone))return!1;if(!GB.valid.checkPassword(this.rpassword))return!1;if(this.rpassword!=this.ragainpassword)return void GB.utils.htoast("两次输入的密码不一致");if(!GB.valid.checkYzm(this.ryzm))return!1;var t={phone:this.rtelephone,password:this.rpassword,verificationCode:this.ryzm};h(t).then(function(n){0==n.status?(GB.cookie.addCookie("telephone",t.phone),location.href=htmlbasePath+"/index.html"):n.msg&&GB.utils.htoast(n.msg)})}}})}();