!function(){"use strict";function t(t,e,n){var e=e||{},t=t||"",n=n||"post";if(!t&&"string"!=typeof t)return void console.log("传入的url有问题");"/"!=t.charAt(0)&&(t="/"+t);var o={type:n,url:proxypath+t,data:e};return new u(function(t,e){GB.ajax2(o).done(function(e){t(e)}).fail(function(t){e(t)})})}var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,o){!function(t){function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(){for(var t=0;t<S.length;t++)S[t][0](S[t][1]);S=[],w=!1}function i(t,e){S.push([t,e]),w||(w=!0,j(r,0))}function u(t,e){function n(t){c(e,t)}function o(t){l(e,t)}try{t(n,o)}catch(t){o(t)}}function s(t){var e=t.owner,n=e.state_,o=e.data_,r=t[n],i=t.then;if("function"==typeof r){n=_;try{o=r(o)}catch(t){l(i,t)}}a(i,o)||(n===_&&c(i,o),n===P&&l(i,o))}function a(t,e){var o;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":n(e)))){var r=e.then;if("function"==typeof r)return r.call(e,function(n){o||(o=!0,e!==n?c(t,n):f(t,n))},function(e){o||(o=!0,l(t,e))}),!0}}catch(e){return o||l(t,e),!0}return!1}function c(t,e){t!==e&&a(t,e)||f(t,e)}function f(t,e){t.state_===g&&(t.state_=b,t.data_=e,i(p,t))}function l(t,e){t.state_===g&&(t.state_=b,t.data_=e,i(d,t))}function h(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)s(e[n])}function p(t){t.state_=_,h(t)}function d(t){t.state_=P,h(t)}function y(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof y==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],u(t,this)}var v=t.Promise,m=v&&"resolve"in v&&"reject"in v&&"all"in v&&"race"in v&&function(){var t;return new v(function(e){t=e}),"function"==typeof t}();o?(o.Promise=m?v:y,o.Polyfill=y):m||(t.Promise=y);var w,g="pending",b="sealed",_="fulfilled",P="rejected",x=function(){},j="undefined"!=typeof setImmediate?setImmediate:setTimeout,S=[];y.prototype={constructor:y,state_:g,then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(x),fulfilled:t,rejected:e};return this.state_===_||this.state_===P?i(s,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},y.all=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.all().");return new n(function(e,n){for(var o,r=[],i=0,u=0;u<t.length;u++)o=t[u],o&&"function"==typeof o.then?o.then(function(t){return i++,function(n){r[t]=n,--i||e(r)}}(u),n):r[u]=o;i||e(r)})},y.race=function(t){var n=this;if(!e(t))throw new TypeError("You must pass an array to Promise.race().");return new n(function(e,n){for(var o,r=0;r<t.length;r++)o=t[r],o&&"function"==typeof o.then?o.then(e,n):e(o)})},y.resolve=function(t){var e=this;return t&&"object"===(void 0===t?"undefined":n(t))&&t.constructor===e?t:new e(function(e){e(t)})},y.reject=function(t){return new this(function(e,n){n(t)})}}("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:e)}),u=i.Promise,s=function(e,n){return t(e,n,"post")},a=function(e,n){return t(e,n,"get")},c=(function(){function t(e){if(o(this,t),!e||"string"!=typeof e)throw new Error("prefix is undefine");"/"!=e.charAt(e.length-1)&&(e+="/"),this.prefix=e,this.queryFilter=function(t){return t},this.exceptFilter=function(t){return u.reject(t)}}r(t,[{key:"get",value:function(t,e){return a(this.prefix+t,e).then(this.queryFilter).catch(this.exceptFilter)}},{key:"post",value:function(t,e){return s(this.prefix+t,e).then(this.queryFilter).catch(this.exceptFilter)}}])}(),function(t){return s("vote/votePromotion",t)}),f=function(t){return request.post("team/getTeamsFor32",t)};new Vue({el:"#app",data:{isSelected:!1,list:[],basePath:basePath,selectstatus:[{},{},{},{},{},{},{},{}],groupCode:{0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H"},param:[]},mounted:function(){var t=this;f().then(function(e){0==e.status?(t.isSelected=e.data.isSelected||!1,t.list=e.data.list||[]):e.msg&&GB.utils.htoast(e.msg)})},methods:{selectteam:function(t,e,n){if(this.selectstatus[t][n]){var o=$.extend({},this.selectstatus[t]);return 1==o[n]?o[n]=0:o[n]=1,void this.$set(this.selectstatus,t,o)}var r=this.selectstatus[t],i=0;for(var u in r)r[u]&&i++;if(2==i)return void GB.utils.htoast("一个组内最多选择两支球队");var s=$.extend({},this.selectstatus[t]);return s[n]=1,void this.$set(this.selectstatus,t,s)},getParam:function(){var t=this,e=[];return this.selectstatus.forEach(function(n,o){var r={};for(var i in n)n[i]&&(r={roundsCode:1,groupCode:t.groupCode[o],teamId:i},e.push(r))}),e},submit:function(){var t=this.getParam();if(t.length<8)return void GB.utils.htoast("请至少选择8支球队");var e={roundsCode:1,jsonStr:JSON.stringify(t)};c(e).then(function(t){0==t.status?location.href=htmlbasePath+"/pages/cupdraw/success.html":t.msg&&GB.utils.htoast(t.msg)})}}})}();